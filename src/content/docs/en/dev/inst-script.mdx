---
title: Install scripts
layout: /src/layouts/autonum.astro
sidebar:
  order: 20
lastUpdated: 2025-10-19
---
# Help wanted
## Support on each distro
`./setup install` use `sdata/lib/dist-determine` to determine `$OS_GROUP_ID` and then use `./sdata/dist-<OS_GROUP_ID>/install-deps.sh` for dependency installation.

**We need more scripts `sdata/dist-<OS_GROUP_ID>/install-deps.sh`** to support specific distro using their system package manager.

:::tip[What is OS_GROUP_ID?]
The `OS_GROUP_ID` is similar to `OS_DISTRO_ID` but corresponds to a group of distros, which allows easier support for a group of similar distros.

Examples:
- `OS_GROUP_ID=arch` corresponds to Arch Linux, EndeavourOS, CachyOS and other Arch(-based) distros.
- `OS_GROUP_ID=suse` does not exist yet, but it *should* correspond to Opensuse Leap and Opensuse Tumbleweed.
:::

Requirements:
- This script should be written in Bash.
- This script should be idempotent.
- This script should reflect or cover the equivalents of the packages listed in [deps-info.md](https://github.com/end-4/dots-hyprland/blob/main/sdata/deps-info.md).
- If needed, also modify `./sdata/subcmd-install/2.setups.sh` to handle special cases for your distro.
- Create `sdata/dist-<OS_GROUP_ID>/.gitignore` if files generated during building should not be tracked by Git, for example binary, cache, fetched source tree or archive.

:::tip[Tips when writing the script]
- Environment variables and functions defined inside `sdata/lib/` can be used.
  - The functions `v()`, `showfun()` and `x()` are especially important.
  - `v()` asks user before executing and also catch errors, `x()` only catches errors.
  - For normall commands, just use `v()`.
  - For custom function, first use `showfun()` and then `v()`, and use `x()` for lines inside the definition of function, so that user will be able to save their time by only answer one time for a function.
- Run `./setup install-deps` to test `sdata/dist-<OS_GROUP_ID>/install-deps.sh` quickly.
- To get info of a package (e.g. what executable(s) it provides), search it on [Arch Linux Packages](https://archlinux.org/packages) or the [AUR](https://aur.archlinux.org/packages).
- [jordansissel/fpm](https://github.com/jordansissel/fpm) might be helpful in converting Arch packages to other packages such as rpm.
:::

Optional:
- Create "meta packages" using the prefix `illogical-impulse-`, so that user can remove them easily without unexpectedly removing the packages that installed by the user for other purposes.
- Create `sdata/dist-<OS_GROUP_ID>/README.md`.
- Create `sdata/dist-<OS_GROUP_ID>/uninstall-deps.sh` which will be sourced if exists when running `./setup uninstall`.
- Subscribe [discussion#2140](https://github.com/end-4/dots-hyprland/discussions/2140) to get notifications about updates on `sdata/dist-arch/` by GitHub Action bot in future.

:::tip[outdate-detect-mode]
`sdata/dist-<OS_GROUP_ID>/outdate-detect-mode` is a text file. Just use `AUTO` as its content in your PR.

For possible values, see the definition of function `outdate_detect()` in [1.deps-selector.sh](https://github.com/end-4/dots-hyprland/blob/main/sdata/subcmd-install/1.deps-selector.sh).
:::

## Cross-distro support via Nix
When `--via-nix` is passed to `./setup install`, `./sdata/dist-nix/install-deps.sh` (still experimental) will be used. It's not for NixOS, but for nearly every distro.

**We need help on `sdata/dist-nix/install-deps.sh`.**

See [issue #1061](https://github.com/end-4/dots-hyprland/issues/1061).

# Main method
The related scripts and files around `./setup install` belongs to "main method", which is developed and maintained mainly by clsty.
## Idempotent
The scripts are and should be **idempotent**, i.e. capable for running multiple times.

This is useful for debugging and a resumable installation, and also provide updating function somehow.
## Structure
- Main script: `./setup`
- `sdata/`: 
  - `sdata/lib/`: Scripts containing reusable codes to be sourced at the beginning.
  - `sdata/subcmd-install/`: Scripts containing the actual steps for subcommand `install`.
  - `sdata/uv/`: For python dependencies handled by uv.
- `sdata/dist-<OS_GROUP_ID>/`: Contains the collection of the distro specific install scripts which `./setup install` select to use according to the current distro. It also contains other files needed by or related to the distro specific scripts.
- `sdata/dist-nix/`: Used when `--via-nix` is passed. Still experimental.
- `cache/`: When the script build something from source, they're stored under `./cache/`. It's included in `.gitignore`.

## Online script
`get`:
- Stored in the repo of dots-hyprland-wiki to be served by the doc site directly.
- When executed, it downloads the dots-hyprland repo and then executes the `./setup install`.

## Nix (WIP)
See [issue#1061](https://github.com/end-4/dots-hyprland/issues/1061) for detail.
